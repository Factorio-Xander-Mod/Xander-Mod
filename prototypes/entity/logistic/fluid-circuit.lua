local xmutil = require("xmutil")

function xm_pipe_pictures(name)
return
{
	straight_vertical_single =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/straight-vertical-single.png",
		priority = "extra-high",
		width = 80,
		height = 80,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-straight-vertical-single.png",
			priority = "extra-high",
			width = 160,
			height = 160,
			scale = 0.5
		}
	},
	straight_vertical =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/straight-vertical.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-straight-vertical.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	straight_vertical_window =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/straight-vertical-window.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-straight-vertical-window.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	straight_horizontal_window =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/straight-horizontal-window.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-straight-horizontal-window.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	straight_horizontal =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/straight-horizontal.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-straight-horizontal.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	corner_up_right =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/corner-up-right.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-corner-up-right.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	corner_up_left =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/corner-up-left.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-corner-up-left.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	corner_down_right =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/corner-down-right.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-corner-down-right.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	corner_down_left =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/corner-down-left.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-corner-down-left.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	t_up =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/t-up.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-t-up.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	t_down =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/t-down.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-t-down.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	t_right =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/t-right.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-t-right.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	t_left =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/t-left.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-t-left.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	cross =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/cross.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-cross.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	ending_up =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/ending-up.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-ending-up.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	ending_down =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/ending-down.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-ending-down.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	ending_right =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/ending-right.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-ending-right.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	ending_left =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/ending-left.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-ending-left.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	horizontal_window_background =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/horizontal-window-background.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-horizontal-window-background.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	vertical_window_background =
	{
		filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/vertical-window-background.png",
		priority = "extra-high",
		width = 64,
		height = 64,
		hr_version =
		{
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe/" .. name .. "/hr-vertical-window-background.png",
			priority = "extra-high",
			width = 128,
			height = 128,
			scale = 0.5
		}
	},
	fluid_background =
	{
		filename = "__base__/graphics/entity/pipe/fluid-background.png",
		priority = "extra-high",
		width = 32,
		height = 20,
		hr_version =
		{
			filename = "__base__/graphics/entity/pipe/hr-fluid-background.png",
			priority = "extra-high",
			width = 64,
			height = 40,
			scale = 0.5
		}
	},
	low_temperature_flow =
	{
		filename = "__base__/graphics/entity/pipe/fluid-flow-low-temperature.png",
		priority = "extra-high",
		width = 160,
		height = 18
	},
	middle_temperature_flow =
	{
		filename = "__base__/graphics/entity/pipe/fluid-flow-medium-temperature.png",
		priority = "extra-high",
		width = 160,
		height = 18
	},
	high_temperature_flow =
	{
		filename = "__base__/graphics/entity/pipe/fluid-flow-high-temperature.png",
		priority = "extra-high",
		width = 160,
		height = 18
	},
	gas_flow =
	{
		filename = "__base__/graphics/entity/pipe/steam.png",
		priority = "extra-high",
		line_length = 10,
		width = 24,
		height = 15,
		frame_count = 60,
		axially_symmetrical = false,
		direction_count = 1,
		hr_version =
		{
			filename = "__base__/graphics/entity/pipe/hr-steam.png",
			priority = "extra-high",
			line_length = 10,
			width = 48,
			height = 30,
			frame_count = 60,
			axially_symmetrical = false,
			direction_count = 1
		}
	}
}
end

local function xm_pipe_to_ground_pictures(material)
	ret = {}
	for _, dir in ipairs{"up", "down", "left", "right"} do
		ret[dir] = {
			filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe-to-ground/"..material.."/pipe-to-ground-"..dir..".png",
			priority = "high",
			width = 64,
			height = 64,
			hr_version =
			{
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pipe-to-ground/"..material.."/hr-pipe-to-ground-"..dir..".png",
				priority = "extra-high",
				width = 128,
				height = 128,
				scale = 0.5
			}
		}
	end
	return ret
end

local function xm_pipe(material, max_health)
	return xmutil.clone("pipe", "pipe",
		{},
		{
			name = "pipe-"..material,
			icon = "__xander-mod__/graphics/item/logistic/pipe/pipe-"..material..".png",
			minable = {hardness = 0.2, mining_time = 0.5, result = "pipe-"..material},
			max_health = max_health,
			pictures = xm_pipe_pictures(material),
		})
end

local function xm_pipe_to_ground(material, max_health, max_underground_distance)
	return xmutil.clone("pipe-to-ground", "pipe-to-ground",
		{},
		{
			name = "pipe-to-ground-"..material,
			icon = "__xander-mod__/graphics/item/logistic/pipe/pipe-to-ground-"..material..".png",
			minable = {hardness = 0.2, mining_time = 0.5, result = "pipe-to-ground-"..material},
			max_health = max_health,
			pictures = xm_pipe_to_ground_pictures(material),
			fluid_box = {
				pipe_connections = { [2] = { max_underground_distance = max_underground_distance } }
			},
		})
end

--Base Overrides

--Base "pipe"
data.raw.pipe["pipe"].max_health = 50

--Base "pipe-to-ground"
data.raw["pipe-to-ground"]["pipe-to-ground"].max_health = 50
data.raw["pipe-to-ground"]["pipe-to-ground"].fluid_box.pipe_connections =
{
	{position = {0, -1}},
	{position = {0, 1}, max_underground_distance = 9}
}

--Base "storage-tank"
--Base "pump"
data.raw.pump["pump"].max_health = 200
data.raw.pump["pump"].energy_source.emissions = 0.005
data.raw.pump["pump"].energy_usage = "20kW"

--Base "arithmetic-combinator"
--Base "decider-combinator"
--Base "constant-combinator"
--Base "power-switch"
--Base "programmable-speaker"


data:extend(
{

--Base "template" placeholder
--Template

--Base "pipe" placeholder
--Copper Pipe
xm_pipe("copper", 50),
--Steel Pipe
xm_pipe("steel", 100),
--Monel Pipe
xm_pipe("monel", 100),
--Stainless Steel Pipe
xm_pipe("stainless", 200),
--Plastic Pipe
xm_pipe("plastic", 200),
--Superalloy Pipe
xm_pipe("superalloy", 200),

--Base "pipe-to-ground" placeholder
--Copper Pipe To Ground
xm_pipe_to_ground("copper", 50, 9),
--Steel Pipe To Ground
xm_pipe_to_ground("steel", 100, 19),
--Monel Pipe To Ground
xm_pipe_to_ground("monel", 100, 19),
--Stainless Steel Pipe To Ground
xm_pipe_to_ground("stainless", 200, 29),
--Plastic Pipe To Ground
xm_pipe_to_ground("plastic", 200, 29),
--Superalloy Pipe To Ground
xm_pipe_to_ground("superalloy", 200, 29),

--Base "storage-tank" placeholder
--Pressurized Storage Tank
xmutil.clone("storage-tank", "storage-tank",
	{},
	{
		name = "storage-tank-2",
		icon = "__xander-mod__/graphics/item/logistic/plumbing/storage-tank-2.png",
		minable = {mining_time = 1.5, result = "storage-tank-2"},
		max_health = 1000,
		pictures = {
			picture = {
				sheets = {
					{
						filename = "__xander-mod-graphics-0__/graphics/entity/logistic/storage-tank-2/2.png",
						width = 140,
						height = 115,
						shift = {0.6875, 0.109375},
						hr_version = xmutil.NIL,
					},
				},
			},
		},
	}
),

--Base "pump"
--Rotary Impeller Pump
xmutil.clone("pump", "pump",
	{},
	{
		name = "pump-2",
		icon = "__xander-mod__/graphics/item/logistic/plumbing/pump-2.png",
		minable = {mining_time = 1, result = "pump-2"},
		max_health = 400,
		energy_source = { emissions = 0.002 },
		energy_usage = "50kW",
		pumping_speed = 500,
		animations = {
			north = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/north.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/hr-north.png" },
			},
			east = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/east.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/hr-east.png" },
			},
			south = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/south.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/hr-south.png" },
			},
			west = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/west.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-2/hr-west.png" },
			},
		}
	}
),

--Turbomolecular Pump
xmutil.clone("pump", "pump",
	{},
	{
		name = "pump-3",
		icon = "__xander-mod__/graphics/item/logistic/plumbing/pump-3.png",
		minable = {mining_time = 1, result = "pump-3"},
		max_health = 400,
		energy_source = { emissions = 0.002 },
		energy_usage = "50kW",
		pumping_speed = 500,
		animations = {
			north = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/north.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/hr-north.png" },
			},
			east = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/east.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/hr-east.png" },
			},
			south = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/south.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/hr-south.png" },
			},
			west = {
				filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/west.png",
				hr_version = { filename = "__xander-mod-graphics-0__/graphics/entity/logistic/pump-3/hr-west.png" },
			},
		}
	}
),
--Base "arithmetic-combinator" placeholder
--Base "decider-combinator" placeholder
--Base "constant-combinator" placeholder
--Base "power-switch" placeholder
--Base "programmable-speaker" placeholder

}
)